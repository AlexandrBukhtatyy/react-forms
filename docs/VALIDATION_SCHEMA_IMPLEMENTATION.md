# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Validation Schema –¥–ª—è React Forms

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

–î–∞—Ç–∞: 20 –æ–∫—Ç—è–±—Ä—è 2025

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –¢–∏–ø—ã –¥–ª—è validation schema ‚úÖ

**–§–∞–π–ª**: `src/lib/forms/types/validation-schema.ts`

–°–æ–∑–¥–∞–Ω—ã —Ç–∏–ø—ã –¥–ª—è:
- `ValidationContext<TForm, TField>` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª—è —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ñ–æ—Ä–º–µ
- `TreeValidationContext<TForm>` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è cross-field –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `ContextualValidatorFn` - —Ñ—É–Ω–∫—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- `ContextualAsyncValidatorFn` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `TreeValidatorFn` - —Ñ—É–Ω–∫—Ü–∏—è cross-field –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `FieldPath<T>` - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π proxy –¥–ª—è –ø—É—Ç–µ–π –ø–æ–ª–µ–π
- `FieldPathNode` - —É–∑–µ–ª –ø—É—Ç–∏ –ø–æ–ª—è —Å –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

### 2. ValidationRegistry ‚úÖ

**–§–∞–π–ª**: `src/lib/forms/validators/validation-registry.ts`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤:
- –°—Ç–µ–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (applyWhen)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è sync/async/tree –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- –°–≤—è–∑—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ —Å FormStore

### 3. ValidationContext —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ‚úÖ

**–§–∞–π–ª**: `src/lib/forms/validators/validation-context.ts`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã:
- `ValidationContextImpl` - –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è
- `TreeValidationContextImpl` - –¥–ª—è cross-field –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ—Å—Ç—É–ø –∫:
- –ó–Ω–∞—á–µ–Ω–∏—é —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—è
- –ó–Ω–∞—á–µ–Ω–∏—è–º –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π
- –í—Å–µ–π —Ñ–æ—Ä–º–µ
- FieldController –∏ FormStore

### 4. FieldPath proxy ‚úÖ

**–§–∞–π–ª**: `src/lib/forms/validators/field-path.ts`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω FieldPath proxy:
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø—É—Ç—è–º –ø–æ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π —á–µ—Ä–µ–∑ dot-notation
- –ú–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—É—Ç–∏ –∏ –∫–ª—é—á–µ –ø–æ–ª—è
- –£—Ç–∏–ª–∏—Ç—ã `extractPath` –∏ `extractKey`

### 5. –§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ‚úÖ

**–§–∞–π–ª**: `src/lib/forms/validators/schema-validators.ts`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

#### –ö–∞—Å—Ç–æ–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
validate(path.birthDate, (ctx) => {
  const age = calculateAge(ctx.value());
  if (age < 18) {
    return {
      code: 'tooYoung',
      message: '–ó–∞–µ–º—â–∏–∫—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 18 –ª–µ—Ç',
    };
  }
  return null;
});
```

#### –£—Å–ª–æ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
applyWhen(
  path.loanType,
  (type) => type === 'mortgage',
  (path) => {
    required(path.propertyValue, { message: '–£–∫–∞–∂–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å' });
    min(path.propertyValue, 1000000);
  }
);
```

#### Cross-field –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
validateTree(
  (ctx) => {
    const form = ctx.formValue();
    if (form.initialPayment > form.propertyValue) {
      return {
        code: 'initialPaymentTooHigh',
        message: '–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å',
      };
    }
    return null;
  },
  { targetField: 'initialPayment' }
);
```

#### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
validateAsync(
  path.inn,
  async (ctx) => {
    const inn = ctx.value();
    const isValid = await checkInnInDatabase(inn);
    if (!isValid) {
      return {
        code: 'invalidInn',
        message: '–ò–ù–ù –Ω–µ –Ω–∞–π–¥–µ–Ω',
      };
    }
    return null;
  },
  { debounce: 1000 }
);
```

#### –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
- `required()` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
- `min()` / `max()` - –º–∏–Ω–∏–º—É–º/–º–∞–∫—Å–∏–º—É–º –¥–ª—è —á–∏—Å–µ–ª
- `minLength()` / `maxLength()` - –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏
- `email()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è email
- `pattern()` - regex –ø–∞—Ç—Ç–µ—Ä–Ω
- `updateOn()` - —Ç—Ä–∏–≥–≥–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (change/blur/submit)

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FormStore ‚úÖ

**–§–∞–π–ª**: `src/lib/forms/core/form-store.ts`

–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `applyValidationSchema()`:
```typescript
const form = new FormStore(schema);
form.applyValidationSchema((path) => {
  required(path.email, { message: 'Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' });
  applyWhen(
    path.loanType,
    (type) => type === 'mortgage',
    (path) => {
      required(path.propertyValue);
    }
  );
});
```

### 7. Validation Schema –¥–ª—è Credit Application ‚úÖ

**–§–∞–π–ª**: `src/domains/credit-applications/form/schema/credit-application-validation.ts`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –®–∞–≥–∞ 1:
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π (loanType, loanAmount, loanTerm, loanPurpose)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∏–Ω/–º–∞–∫—Å –¥–ª—è —Å—É–º–º—ã –∏ —Å—Ä–æ–∫–∞
- –£—Å–ª–æ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –∏–ø–æ—Ç–µ–∫–∏ (propertyValue, initialPayment)
- –£—Å–ª–æ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–∫—Ä–µ–¥–∏—Ç–∞ (carBrand, carModel, carYear, carPrice)
- Cross-field –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å –Ω–µ –±–æ–ª—å—à–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏)

### 8. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CreditApplicationForm ‚úÖ

**–§–∞–π–ª**: `src/domains/credit-applications/form/components/CreditApplicationForm.tsx`

–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ —Ñ–æ—Ä–º–µ:
```typescript
const createCreditApplicationForm = () => {
  const schema: FormSchema<CreditApplicationFormModel> = {
    // ... –ø–æ–ª—è
  };

  const form = new FormStore(schema);
  form.applyValidationSchema(creditApplicationValidation);
  return form;
};
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü–∞—Ç—Ç–µ—Ä–Ω Validation Schema

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Validation Schema Function          ‚îÇ
‚îÇ  (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏)             ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  const validation = (path) => {             ‚îÇ
‚îÇ    applyWhen(path.field, ..., (path) => {   ‚îÇ
‚îÇ      required(path.field1);                 ‚îÇ
‚îÇ      validate(path.field2, ...);            ‚îÇ
‚îÇ      validateTree(...);                     ‚îÇ
‚îÇ    });                                      ‚îÇ
‚îÇ  };                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         ValidationRegistry                  ‚îÇ
‚îÇ  (—Å–±–æ—Ä –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤)           ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  - –°—Ç–µ–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏              ‚îÇ
‚îÇ  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π              ‚îÇ
‚îÇ  - –°–≤—è–∑—å —Å FormStore                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            FormStore                        ‚îÇ
‚îÇ  (–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ –∫ –ø–æ–ª—è–º)           ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  - applyValidationSchema()                  ‚îÇ
‚îÇ  - –°–æ–∑–¥–∞–Ω–∏–µ FieldPath proxy                 ‚îÇ
‚îÇ  - –í—ã–∑–æ–≤ validation schema                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         FieldController                     ‚îÇ
‚îÇ  (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)                     ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  - –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏                       ‚îÇ
‚îÇ  - –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã                    ‚îÇ
‚îÇ  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ Separation of Concerns
–í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–¥–µ–ª–µ–Ω–∞ –æ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø–æ–ª–µ–π –≤ —Å—Ö–µ–º–µ —Ñ–æ—Ä–º—ã.

### ‚úÖ Declarative API
–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```typescript
applyWhen(path.currentStep, (step) => step >= 1, (path) => {
  required(path.loanType);
  min(path.loanAmount, 50000);
});
```

### ‚úÖ Type Safety
–ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ TypeScript –∏ FieldPath proxy.

### ‚úÖ Conditional Validation
–õ–µ–≥–∫–æ –≤—ã—Ä–∞–∑–∏—Ç—å —É—Å–ª–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É —á–µ—Ä–µ–∑ `applyWhen`.

### ‚úÖ Cross-field Validation
–ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ `validateTree`.

### ‚úÖ Async Support
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å debounce.

### ‚úÖ Reusability
–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª.

## –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### ‚ö†Ô∏è –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è
ValidationRegistry —Å–æ–±–∏—Ä–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã, –Ω–æ –æ–Ω–∏ –µ—â–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ FieldController.
**–¢—Ä–µ–±—É–µ—Ç—Å—è**: –†–∞—Å—à–∏—Ä–∏—Ç—å FieldController –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ contextual –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤.

### ‚ö†Ô∏è –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—É—Ç–∏
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É—Ç–µ–π –≤–∏–¥–∞ `personalData.firstName` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–∞—Å—Ç–∏—á–Ω–æ.
**–¢—Ä–µ–±—É–µ—Ç—Å—è**: –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å extractPath –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.

### ‚ö†Ô∏è updateOn –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
–§—É–Ω–∫—Ü–∏—è `updateOn()` —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä—É–µ—Ç, –Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä –∫ –ø–æ–ª—é.
**–¢—Ä–µ–±—É–µ—Ç—Å—è**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ updateOn –∫ FieldController.

### ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –®–∞–≥ 1
–ò–∑ 6 —à–∞–≥–æ–≤ —Ñ–æ—Ä–º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ.
**–¢—Ä–µ–±—É–µ—Ç—Å—è**: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è 5 —à–∞–≥–æ–≤.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –∫ FieldController
–†–∞—Å—à–∏—Ä–∏—Ç—å FieldController –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è contextual –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É ValidationContext
- –í—ã–∑—ã–≤–∞—Ç—å contextual –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –ø—Ä–∏ validate()
- –ü—Ä–∏–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è –∏–∑ applyWhen

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ ValidationRegistry
–í `ValidationRegistry.applyValidators()`:
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –ø–æ –ø–æ–ª—è–º
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ ValidatorFn/AsyncValidatorFn
- –î–æ–±–∞–≤–ª—è—Ç—å –∫ FieldController —á–µ—Ä–µ–∑ API

### 3. –î–æ–ø–æ–ª–Ω–∏—Ç—å validation schema
–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è —à–∞–≥–æ–≤ 2-6:
- –®–∞–≥ 2: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–§–ò–û, –ø–∞—Å–ø–æ—Ä—Ç, –ò–ù–ù, –°–ù–ò–õ–°)
- –®–∞–≥ 3: –ö–æ–Ω—Ç–∞–∫—Ç—ã (—Ç–µ–ª–µ—Ñ–æ–Ω—ã, email, –∞–¥—Ä–µ—Å–∞)
- –®–∞–≥ 4: –ó–∞–Ω—è—Ç–æ—Å—Ç—å (—Ä–∞–±–æ—Ç–∞, –¥–æ—Ö–æ–¥)
- –®–∞–≥ 5: –î–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–∏–º—É—â–µ—Å—Ç–≤–æ, –∫—Ä–µ–¥–∏—Ç—ã, —Å–æ–∑–∞–µ–º—â–∏–∫–∏)
- –®–∞–≥ 6: –°–æ–≥–ª–∞—Å–∏—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- Integration-—Ç–µ—Å—Ç—ã –¥–ª—è ValidationRegistry
- E2E —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ–æ—Ä–º—ã –∑–∞—è–≤–∫–∏

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- API Reference –¥–ª—è validation schema
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## –§–∞–π–ª—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```
src/lib/forms/
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ validation-schema.ts          # –¢–∏–ø—ã –¥–ª—è validation schema
‚îú‚îÄ‚îÄ validators/
‚îÇ   ‚îú‚îÄ‚îÄ validation-context.ts         # ValidationContext —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ validation-registry.ts        # ValidationRegistry
‚îÇ   ‚îú‚îÄ‚îÄ field-path.ts                 # FieldPath proxy
‚îÇ   ‚îú‚îÄ‚îÄ schema-validators.ts          # –§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                      # –≠–∫—Å–ø–æ—Ä—Ç—ã (–æ–±–Ω–æ–≤–ª–µ–Ω)

src/domains/credit-applications/form/
‚îú‚îÄ‚îÄ schema/
‚îÇ   ‚îî‚îÄ‚îÄ credit-application-validation.ts  # Validation schema –¥–ª—è —Ñ–æ—Ä–º—ã
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ CreditApplicationForm.tsx     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```
src/lib/forms/
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îî‚îÄ‚îÄ form-store.ts                 # –î–æ–±–∞–≤–ª–µ–Ω applyValidationSchema()
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ index.ts                      # –î–æ–±–∞–≤–ª–µ–Ω—ã re-exports
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
const validation = (path: FieldPath<MyForm>) => {
  required(path.email, { message: 'Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' });
  email(path.email);
  updateOn(path.email, 'blur');
};
```

### –£—Å–ª–æ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
const validation = (path: FieldPath<MyForm>) => {
  applyWhen(
    path.userType,
    (type) => type === 'company',
    (path) => {
      required(path.companyName);
      required(path.companyInn);
      pattern(path.companyInn, /^\d{10}$/);
    }
  );
};
```

### Cross-field –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
const validation = (path: FieldPath<MyForm>) => {
  validateTree(
    (ctx) => {
      const { password, confirmPassword } = ctx.formValue();
      if (password !== confirmPassword) {
        return {
          code: 'passwordMismatch',
          message: '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç',
        };
      }
      return null;
    },
    { targetField: 'confirmPassword' }
  );
};
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```typescript
const validation = (path: FieldPath<MyForm>) => {
  validateAsync(
    path.email,
    async (ctx) => {
      const email = ctx.value();
      const exists = await checkEmailExists(email);
      if (exists) {
        return {
          code: 'emailExists',
          message: 'Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω',
        };
      }
      return null;
    },
    { debounce: 700 }
  );
};
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ validation schema —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Angular Signal Forms –ø–∞—Ç—Ç–µ—Ä–Ω—É
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ TypeScript
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å–ª–æ–≤–Ω–æ–π, cross-field –∏ async –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FormStore —á–µ—Ä–µ–∑ `applyValidationSchema()`

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ –∫ FieldController
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö 6 —à–∞–≥–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üéØ **–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ –∫ FieldController –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã.
