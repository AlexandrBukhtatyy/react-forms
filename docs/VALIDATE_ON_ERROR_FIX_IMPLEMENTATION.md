# –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ **"–£–º–Ω–∞—è" –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ValidationSchema API.

### –§–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è

**updateOn: 'change'**:
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- –û—à–∏–±–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

**updateOn: 'blur' –∏–ª–∏ 'submit'** + **–ø–æ–ª–µ –∏–º–µ–µ—Ç –æ—à–∏–±–∫–∏**:
- ‚úÖ –ü—Ä–∏ –≤–≤–æ–¥–µ **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è** ‚Üí –æ—à–∏–±–∫–∞ **–∏—Å—á–µ–∑–∞–µ—Ç —Å—Ä–∞–∑—É** (–ø–æ–∑–∏—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å)
- ‚úÖ –ü—Ä–∏ –≤–≤–æ–¥–µ **–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è** ‚Üí –æ—à–∏–±–∫–∞ **–æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** (–Ω–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚úÖ –ü—Ä–∏ **blur/submit** ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –æ—à–∏–±–æ–∫

**–ë–µ–∑ –æ—à–∏–±–æ–∫**:
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ–≥–ª–∞—Å–Ω–æ `updateOn` (blur/submit)

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

### –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
–ï—Å–ª–∏ —É –ø–æ–ª—è –µ—Å—Ç—å –æ—à–∏–±–∫–∞, –æ–Ω–∞ –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è (–∫—Ä–æ–º–µ —Å–ª—É—á–∞—è `updateOn: 'change'`).

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏
–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –†–µ—à–µ–Ω–∏—è 1 –æ–±–Ω–∞—Ä—É–∂–∏–ª—Å—è –±–∞–≥:

**–°–∏–º–ø—Ç–æ–º—ã**:
- –ü–æ–ª–µ –∏–º–µ–µ—Ç –æ—à–∏–±–∫—É (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —á–µ—Ä–µ–∑ ValidationSchema)
- –ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø–æ–ª—è –∏–ª–∏ –≤–≤–æ–¥–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ—à–∏–±–∫–∞ **–∏—Å—á–µ–∑–∞–µ—Ç**
- –≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è

**–ü—Ä–∏—á–∏–Ω–∞**:
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ ValidationSchema API:
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ `GroupNode`
2. –û—à–∏–±–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ –ø–æ–ª—è —á–µ—Ä–µ–∑ `setErrors()`
3. –ú–∞—Å—Å–∏–≤—ã `this.validators` –∏ `this.asyncValidators` —É –ø–æ–ª–µ–π **–ø—É—Å—Ç—ã–µ**
4. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `validate()` –º–µ—Ç–æ–¥ `validateImmediate()` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
5. –ü—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—á–∏—â–∞–µ—Ç –æ—à–∏–±–∫–∏: `this._errors.value = []` (—Å—Ç—Ä–æ–∫–∞ 230)
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –û—à–∏–±–∫–∏ –æ—Ç ValidationSchema —Å—Ç–∏—Ä–∞—é—Ç—Å—è –ø–æ–ª–µ–≤–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è "–£–º–Ω–æ–π" –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è (setValue):

1. **updateOn === 'change'**:
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
   - –û—à–∏–±–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

2. **updateOn !== 'change' && –ø–æ–ª–µ –∏–º–µ–µ—Ç –æ—à–∏–±–∫–∏ && –µ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã**:
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ
   - **–ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞** ‚Üí –æ—à–∏–±–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è (–ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π UX)
   - **–ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —É—Å–ø–µ—à–Ω–∞** ‚Üí —Å—Ç–∞—Ä—ã–µ –æ—à–∏–±–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è (–Ω–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

3. **–ù–µ—Ç –æ—à–∏–±–æ–∫ –∏–ª–∏ –Ω–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤**:
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
   - –ñ–¥–µ–º —Å–æ–±—ã—Ç–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ updateOn (blur/submit)

### –î–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü–æ–ª–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å:

1. **–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã** (field-level):
   - –ü–µ—Ä–µ–¥–∞–Ω—ã –≤ `FieldConfig.validators` –∏ `FieldConfig.asyncValidators`
   - –•—Ä–∞–Ω—è—Ç—Å—è –≤ `this.validators` –∏ `this.asyncValidators`
   - –ü–æ–ª–µ **—É–ø—Ä–∞–≤–ª—è–µ—Ç** —ç—Ç–∏–º–∏ –æ—à–∏–±–∫–∞–º–∏ —á–µ—Ä–µ–∑ —É–º–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é

2. **–í–Ω–µ—à–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã** (form-level ValidationSchema):
   - –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ `GroupNode` —á–µ—Ä–µ–∑ `applyValidationSchema()`
   - –û—à–∏–±–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `setErrors()`
   - –ú–∞—Å—Å–∏–≤—ã –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ **–ø—É—Å—Ç—ã–µ** ‚Üí —É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
   - –ü–æ–ª–µ **–Ω–µ –¥–æ–ª–∂–Ω–æ** –≤–º–µ—à–∏–≤–∞—Ç—å—Å—è –≤ —ç—Ç–∏ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤

```typescript
const hasOwnValidators =
  this.validators.length > 0 ||
  this.asyncValidators.length > 0;
```

---

## üìù –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è setValue()

**–§–∞–π–ª**: [src/lib/forms/core/nodes/field-node.ts](../src/lib/forms/core/nodes/field-node.ts#L130-L164)

```typescript
setValue(value: T, options?: SetValueOptions): void {
  this._value.value = value;
  this._dirty.value = true;

  if (options?.emitEvent === false) {
    return;
  }

  const hasOwnValidators = this.validators.length > 0 || this.asyncValidators.length > 0;
  const hasErrors = this._errors.value.length > 0;

  // 1. –ï—Å–ª–∏ updateOn === 'change' ‚Üí –≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º
  if (this.updateOn === 'change') {
    this.validate();
    return;
  }

  // 2. –ï—Å–ª–∏ —É –ø–æ–ª—è –µ—Å—Ç—å –æ—à–∏–±–∫–∏ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
  //    ‚Üí –∑–∞–ø—É—Å–∫–∞–µ–º "—É–º–Ω—É—é" –≤–∞–ª–∏–¥–∞—Ü–∏—é:
  //    - –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–∞–ª–æ –≤–∞–ª–∏–¥–Ω—ã–º ‚Üí –æ—á–∏—â–∞–µ–º –æ—à–∏–±–∫–∏ (UX: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É—Å–ø–µ—Ö)
  //    - –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ ‚Üí –æ—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ—à–∏–±–∫–∏ (UX: –Ω–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ–º –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞)
  if (hasErrors && hasOwnValidators) {
    const currentErrors = [...this._errors.value];

    this.validate().then((isValid) => {
      // –ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –æ—à–∏–±–∫–∏
      // (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –¥–æ blur/submit)
      if (!isValid) {
        this._errors.value = currentErrors;
        this._status.value = 'invalid';
      }
      // –ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞, –æ—à–∏–±–∫–∏ —É–∂–µ –æ—á–∏—â–µ–Ω—ã –º–µ—Ç–æ–¥–æ–º validate()
    });
  }
}
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –¥–ª—è `updateOn === 'change'` –∏ –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ "–£–º–Ω–∞—è" –≤–∞–ª–∏–¥–∞—Ü–∏—è: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ ValidationSchema –æ—à–∏–±–∫–∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è (hasOwnValidators = false)

---

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ validateImmediate()

**–§–∞–π–ª**: [src/lib/forms/core/nodes/field-node.ts](../src/lib/forms/core/nodes/field-node.ts#L225-L235)

```typescript
private async validateImmediate(): Promise<boolean> {
  const validationId = ++this.currentValidationId;

  // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  const syncErrors: ValidationError[] = [];
  for (const validator of this.validators) {
    const error = validator(this._value.value);
    if (error) syncErrors.push(error);
  }

  if (syncErrors.length > 0) {
    this._errors.value = syncErrors;
    this._status.value = 'invalid';
    return false;
  }

  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  if (this.asyncValidators.length > 0) {
    this._pending.value = true;
    this._status.value = 'pending';

    const asyncResults = await Promise.all(
      this.asyncValidators.map((validator) => validator(this._value.value))
    );

    if (validationId !== this.currentValidationId) {
      return false; // –≠—Ç–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞
    }

    this._pending.value = false;

    const asyncErrors = asyncResults.filter(Boolean) as ValidationError[];
    if (asyncErrors.length > 0) {
      this._errors.value = asyncErrors;
      this._status.value = 'invalid';
      return false;
    }
  }

  // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –û—á–∏—â–∞–µ–º –æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –ø–æ–ª—è –µ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
  // –ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ –Ω–µ—Ç, –∑–Ω–∞—á–∏—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ValidationSchema –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–æ—Ä–º—ã
  // –∏ –æ—à–∏–±–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑–≤–Ω–µ —á–µ—Ä–µ–∑ setErrors()
  const hasOwnValidators =
    this.validators.length > 0 ||
    this.asyncValidators.length > 0;

  if (hasOwnValidators) {
    this._errors.value = [];
    this._status.value = 'valid';
  }

  return this._errors.value.length === 0;
}
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `hasOwnValidators` –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ ValidationSchema –æ—à–∏–±–∫–∏ **–Ω–µ –æ—á–∏—â–∞—é—Ç—Å—è** –ø–æ–ª–µ–≤–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –û—à–∏–±–∫–∏ –æ—Ç ValidationSchema —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `setErrors()` –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–æ—Ä–º—ã

---

## üéØ –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–µ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏ (updateOn: 'blur')

```typescript
const emailField = new FieldNode({
  value: '',
  component: Input,
  validators: [required, email], // ‚úÖ –ï—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
  updateOn: 'blur', // ‚ö†Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ blur
});

// 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "test" –∏ –ø–æ–∫–∏–¥–∞–µ—Ç –ø–æ–ª–µ (blur)
await emailField.validate();
// ‚ùå –û—à–∏–±–∫–∞: "Invalid email format"

// 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å: –≤–≤–æ–¥–∏—Ç "test@"
emailField.setValue('test@');
// ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è "—É–º–Ω–∞—è" –≤–∞–ª–∏–¥–∞—Ü–∏—è:
//    - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
//    - –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–µ–≤–∞–ª–∏–¥–Ω–æ (–Ω–µ–ø–æ–ª–Ω—ã–π email)
//    - –î–µ–π—Å—Ç–≤–∏–µ: —Å—Ç–∞—Ä–∞—è –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π
// ‚ùå –û—à–∏–±–∫–∞: "Invalid email format" (–ù–ï –∏–∑–º–µ–Ω–∏–ª–∞—Å—å)

// 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ""
emailField.setValue('');
// ‚úÖ –£–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:
//    - –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–µ–≤–∞–ª–∏–¥–Ω–æ (required)
//    - –î–µ–π—Å—Ç–≤–∏–µ: —Å—Ç–∞—Ä–∞—è –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è
// ‚ùå –û—à–∏–±–∫–∞: "Invalid email format" (–ù–ï "Field is required")

// 4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç: "test@mail.com"
emailField.setValue('test@mail.com');
// ‚úÖ –£–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:
//    - –†–µ–∑—É–ª—å—Ç–∞—Ç: –í–ê–õ–ò–î–ù–û!
//    - –î–µ–π—Å—Ç–≤–∏–µ: –æ—à–∏–±–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è
// ‚úÖ –û—à–∏–±–∫–∞ –∏—Å—á–µ–∑–ª–∞! (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É—Å–ø–µ—Ö –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

// 5. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–Ω–æ–≤–∞ –≤–≤–µ–¥–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø–æ–∫–∏–Ω–µ—Ç –ø–æ–ª–µ
emailField.setValue('wrong');
// ‚ùå –û—à–∏–±–∫–∏ –Ω–µ—Ç (—É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –æ—à–∏–±–∫–∏)
await emailField.validate(); // –í—ã–∑–≤–∞–Ω–æ —á–µ—Ä–µ–∑ onBlur –≤ Input –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
// ‚ùå –û—à–∏–±–∫–∞: "Invalid email format" (–ø–æ–∫–∞–∑–∞–Ω–∞ –ø–æ—Å–ª–µ blur)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 1b: –ü–æ–ª–µ —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏ (updateOn: 'change')

```typescript
const emailField = new FieldNode({
  value: '',
  component: Input,
  validators: [required, email],
  updateOn: 'change', // ‚ö†Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏
});

// –ü—Ä–∏ updateOn: 'change' —É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
// –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –æ—à–∏–±–æ–∫

emailField.setValue('test');
// ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
// ‚ùå –û—à–∏–±–∫–∞: "Invalid email format" (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É)

emailField.setValue('test@mail.com');
// ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
// ‚úÖ –û—à–∏–±–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª–µ —Å ValidationSchema (form-level validation)

```typescript
const form = new GroupNode({
  email: {
    value: '',
    component: Input,
    // ‚ùå –ù–ï–¢ validators - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ValidationSchema
  },
});

// –ü—Ä–∏–º–µ–Ω—è–µ–º ValidationSchema –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–æ—Ä–º—ã
form.applyValidationSchema((path) => {
  required(path.email);
  email(path.email);
});

// 1. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ blur)
await form.validate();
// ‚ùå form.email –∏–º–µ–µ—Ç –æ—à–∏–±–∫—É (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ setErrors())

// 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å: –≤–≤–æ–¥–∏—Ç "test@"
form.email.setValue('test@');
// ‚ö†Ô∏è –†–µ–≤–∞–ª–∏–¥–∞—Ü–∏—è –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (hasOwnValidators = false)
// ‚ùå –û—à–∏–±–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∂–¥–µ–º —Å–ª–µ–¥—É—é—â–µ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã)

// 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç –ø–æ–ª–µ (blur) –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
await form.validate();
// ‚ùå –û—à–∏–±–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è (email –≤—Å–µ –µ—â–µ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω)

// 4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç: "test@mail.com"
form.email.setValue('test@mail.com');

// 5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç –ø–æ–ª–µ (blur)
await form.validate();
// ‚úÖ –û—à–∏–±–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç! (ValidationSchema –Ω–µ –Ω–∞—à–ª–∞ –æ—à–∏–±–æ–∫, setErrors([]))
```

---

## üîç –ö–ª—é—á–µ–≤–∞—è —Ä–∞–∑–Ω–∏—Ü–∞

| –ê—Å–ø–µ–∫—Ç | Field-level validators | Form-level ValidationSchema |
|--------|----------------------|----------------------------|
| **–ì–¥–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã** | `FieldConfig.validators` | `form.applyValidationSchema()` |
| **–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è** | `this.validators`, `this.asyncValidators` | ValidationRegistry ‚Üí –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `applyContextualValidators()` |
| **–ö–∞–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏** | `validate()` ‚Üí `validateImmediate()` | `form.validate()` ‚Üí `setErrors()` |
| **updateOn: 'change'** | ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ | ‚ùå –ù–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è (–Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤) |
| **updateOn: 'blur', –µ—Å—Ç—å –æ—à–∏–±–∫–∏** | ‚úÖ –£–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ) | ‚ùå –ù–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è (–Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤) |
| **updateOn: 'blur', –Ω–µ—Ç –æ—à–∏–±–æ–∫** | ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–æ blur | ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è |
| **–ö—Ç–æ –æ—á–∏—â–∞–µ—Ç –æ—à–∏–±–∫–∏** | –°–∞–º–æ –ø–æ–ª–µ (—É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–ª–∏ validate()) | –§–æ—Ä–º–∞ (`form.validate()` ‚Üí `setErrors([])`) |

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π UX
**–ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**:
- ‚úÖ –û—à–∏–±–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç **—Å—Ä–∞–∑—É**, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–≤–∏–¥–∏—Ç —É—Å–ø–µ—Ö –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** - –Ω–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å blur

**–ù–µ–Ω–∞–≤—è–∑—á–∏–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**:
- ‚úÖ –ü—Ä–∏ –≤–≤–æ–¥–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∞—Ä–∞—è –æ—à–∏–±–∫–∞ **–Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**
- ‚úÖ –ù–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞
- ‚úÖ –ù–æ–≤–∞—è –æ—à–∏–±–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ blur/submit (—Å–æ–≥–ª–∞—Å–Ω–æ updateOn)

### 2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **Field-level validation**: –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏–º–∏ –æ—à–∏–±–∫–∞–º–∏ —á–µ—Ä–µ–∑ —É–º–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
- **Form-level validation**: –û—à–∏–±–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–æ–π
- **updateOn: 'change'**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏)

### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
```typescript
// –ü–æ–¥—Ö–æ–¥ 1: Field-level validators (—É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç)
const field1 = new FieldNode({
  value: '',
  validators: [required, email], // ‚úÖ hasOwnValidators = true
  updateOn: 'blur',
});

// –ü–æ–¥—Ö–æ–¥ 2: Form-level ValidationSchema (—É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –≤–º–µ—à–∏–≤–∞–µ—Ç—Å—è)
const form = new GroupNode({
  email: { value: '' }, // ‚ùå hasOwnValidators = false
});
form.applyValidationSchema((path) => {
  email(path.email); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ setErrors()
});
```

### 4. –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `currentValidationId` –¥–ª—è –æ—Ç–º–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–π (—É–∂–µ –±—ã–ª–æ)

### 5. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
- ‚úÖ –£–ª—É—á—à–∞–µ—Ç UX –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º —Å field-level validators
- ‚úÖ ValidationSchema –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ updateOn: 'change' —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [VALIDATE_ON_ERROR_FIX_SOLUTIONS.md](VALIDATE_ON_ERROR_FIX_SOLUTIONS.md) - –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è
- [STEP_FORM_IMPLEMENTATION.md](STEP_FORM_IMPLEMENTATION.md) - –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è useStepForm
- [CLAUDE.md](../CLAUDE.md) - –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

Dev-—Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç: **http://localhost:5173**

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ field-level –∏ form-level –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –û—à–∏–±–∫–∏ –æ—Ç ValidationSchema –Ω–µ —Å—Ç–∏—Ä–∞—é—Ç—Å—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –æ–±–æ–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
